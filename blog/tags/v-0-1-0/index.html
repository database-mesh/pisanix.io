<!doctype html>
<html lang="zh" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pisanix RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pisanix Atom Feed"><title data-rh="true">1 篇博文 含有标签「v0.1.0」 | Pisanix</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.pisanix.io/blog/tags/v-0-1-0"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" property="og:title" content="1 篇博文 含有标签「v0.1.0」 | Pisanix"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.pisanix.io/blog/tags/v-0-1-0"><link data-rh="true" rel="alternate" href="https://www.pisanix.io/en/blog/tags/v-0-1-0" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.pisanix.io/blog/tags/v-0-1-0" hreflang="zh"><link data-rh="true" rel="alternate" href="https://www.pisanix.io/blog/tags/v-0-1-0" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.457fbd32.css">
<link rel="preload" href="/assets/js/runtime~main.070bcc6e.js" as="script">
<link rel="preload" href="/assets/js/main.fc8e8518.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Pisanix Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Pisanix Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link" href="/docs/intro">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">博客</a><a class="navbar__item navbar__link" href="/docs/UseCases/kubernetes">使用场景</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/intro">latest</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/intro">latest</a></li><li><a class="dropdown__link" href="/docs/v0.2.0/intro">v0.2.0</a></li><li><a class="dropdown__link" href="/docs/v0.1.1/intro">v0.1.1</a></li><li><a class="dropdown__link" href="/docs/v0.1.0/intro">v0.1.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>中文</span></span></a><ul class="dropdown__menu"><li><a href="/en/blog/tags/v-0-1-0" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/blog/tags/v-0-1-0" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">中文</a></li></ul></div><a href="https://github.com/database-mesh/pisanix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/greetings">Hello! Pisanix!</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>1 篇博文 含有标签「v0.1.0」</h1><a href="/blog/tags">查看所有标签</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/greetings">Hello! Pisanix!</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-04-25T00:00:00.000Z" itemprop="datePublished">2022年4月25日</time> · <!-- -->6 分钟阅读</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><span class="avatar__photo-link avatar__photo"><a href="https://github.com/mlycore" target="_blank" rel="noopener noreferrer"><img class="image_o0gy" src="https://github.com/mlycore.png" alt="Maxwell Miao"></a></span><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mlycore" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Maxwell Miao</span></a></div><small class="avatar__subtitle" itemprop="description">Founder of Pisanix</small></div></div></div><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><span class="avatar__photo-link avatar__photo"><a href="https://github.com/xuanyuan300" target="_blank" rel="noopener noreferrer"><img class="image_o0gy" src="https://i.imgur.com/aQBGA3H_d.webp?maxwidth=760&amp;fidelity=grand" alt="Jiandong Wu"></a></span><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/xuanyuan300" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jiandong Wu</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of Pisanix</small></div></div></div><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><span class="avatar__photo-link avatar__photo"><a href="https://github.com/wbtlb" target="_blank" rel="noopener noreferrer"><img class="image_o0gy" src="https://avatars.githubusercontent.com/u/12859337?s=400&amp;u=a7a03e467206e9b248b75fd57f681da7ce2caa34&amp;v=4" alt="Bo Wang"></a></span><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/wbtlb" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Bo Wang</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of Pisanix</small></div></div></div><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><span class="avatar__photo-link avatar__photo"><a href="https://github.com/windghoul" target="_blank" rel="noopener noreferrer"><img class="image_o0gy" src="https://raw.githubusercontent.com/windghoul/imagestorge/master/1-200403142639406.jpeg" alt="Zhuo Li"></a></span><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/windghoul" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Zhuo Li</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of Pisanix</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>June 6th, 2022, Pisanix announced its first release v0.1.0.</p><p>As the first open source project of <a href="https://www.database-mesh.io" target="_blank" rel="noopener noreferrer">Database Mesh 2.0</a>, Pisanix follows the core concepts that <code>building an efficient and programmable database governance experience in cloud native era</code> from the very beginning. This means Pisanix really hope to help Database Mesh grow to an achievable framework. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="who-is-pisanix-">Who is Pisanix ?<a class="hash-link" href="#who-is-pisanix-" title="标题的直接链接">​</a></h2><p>Pisanix is the open source solution for Database Mesh, which composes of three different components: <code>Pisa-Controller</code>, <code>Pisa-Proxy</code> and <code>Pisa-Daemon</code>(<strong><em>Coming Soon</em></strong>), and is sponsored by <a href="https://www.sphere-ex.com" target="_blank" rel="noopener noreferrer">SphereEx</a>.</p><p>Written with Golang and Rustlang, Pisanix is going to build an experience that support SQL aware traffic management, runtime oriented resource programming and Database Reliability Engineering.</p><p>Like classical Service Mesh deployment pattern, Pisanix also contains a <code>control-plane</code> which is <code>Pisa-Controller</code>, and two <code>data-plane</code> which is <code>Pisa-Proxy</code> and <code>Pisa-Daemon</code>. </p><img loading="lazy" src="/img/pisanix-arch-blog.png" width="600" length="600" class="img_E7b_"><h3 class="anchor anchorWithStickyNavbar_mojV" id="pisa-controller">Pisa-Controller<a class="hash-link" href="#pisa-controller" title="标题的直接链接">​</a></h3><p>Act as the required part of Pisanix, Pisa-Controller is responsible for:</p><ul><li>Sidecar injection: Using MutatingAdmissionWebhook inject sidecar to selected Pods</li><li>Pisa-Proxy configuration conversion: Retrieve service discovery, load balance, concurrency control, SQL circuit break configs in CRDs and convert them to Pisa-Proxy configurations</li><li>Pisa-Daemon configuration conversion: Retrieve traffic QoS configs in CRDs and convert them to Pisa-Daemon configurations</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="pisa-proxy">Pisa-Proxy<a class="hash-link" href="#pisa-proxy" title="标题的直接链接">​</a></h3><p>Pisa-Proxy is the core part of Pisanix, working as a high-performance proxy for different protocols. Currently supports:</p><ul><li>SQL traffic control: Traffic load balance, concurrency control and</li><li>Access Control: Fine-grained access control rule according to user and data relationship</li><li>Circuit break: Reject high risk SQL execution</li><li>Observability: Metrics about SQL processing: latency、throughput</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="pisa-daemon">Pisa-Daemon<a class="hash-link" href="#pisa-daemon" title="标题的直接链接">​</a></h3><p>Pisa-Daemon is optional and will be release soon. Features like runtime resource management, such as providing traffic QoS with the help of eBPF is what Pisa-Daemon care about. </p><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-does-maintainers-say-">What does Maintainers say ?<a class="hash-link" href="#what-does-maintainers-say-" title="标题的直接链接">​</a></h2><p><a href="https://github.com/mlycore" target="_blank" rel="noopener noreferrer">Maxwell</a>: &quot;Thanks to the cloud native ecosystem and all of the open source projects. We have learned a lot from the community, and now we get the chance to do something, that is Pisanix. The core motivation of Pisanix is to help, help developers, SREs and DBAs, and also help databases. This makes Pisanix a very meaningful infrastructure software. Thanks for your attention and support.&quot;</p><p><a href="https://github.com/xuanyuan300" target="_blank" rel="noopener noreferrer">Jiandong</a>: &quot;Pisanix is a concrete practice of the Database Mesh idea. It is a project with great potential. As a nascent community, I hope everyone can participate and witness our growth together.&quot;</p><p><a href="https://github.com/wbtlb" target="_blank" rel="noopener noreferrer">Bo</a>: &quot;Pisanix is a set of governance frameworks in the database DRE project. This framework is all-encompassing. It not only provides users in different scenarios such as developer-facing and DBA, but also provides rich thinking in the field of software design for colleagues in different area. Friends are very welcomed to join the community and build it together.&quot;</p><p><a href="https://github.com/windghoul" target="_blank" rel="noopener noreferrer">Zhuo</a>: &quot;As an emerging project that implements DRE ideas and realizes database-mesh design. Pisanix provides developers, DBAs, and SREs with unlimited possibilities. There will be more designs and inspirations presented to you in the future. I wish everyone will continue to pay attention, build together, and complete this idea.&quot;</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="whats-new-in-v010">What&#x27;s new in v0.1.0<a class="hash-link" href="#whats-new-in-v010" title="标题的直接链接">​</a></h2><p>This is the first release of <code>Pisanix</code>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="features">Features<a class="hash-link" href="#features" title="标题的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="pisa-controller-1">Pisa-Controller<a class="hash-link" href="#pisa-controller-1" title="标题的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="setup">Setup<a class="hash-link" href="#setup" title="标题的直接链接">​</a></h5><ul><li>Label-based sidecar injection</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="configuration-conversion">Configuration conversion<a class="hash-link" href="#configuration-conversion" title="标题的直接链接">​</a></h5><ul><li>Kubernetes CRD conversion to Pisa-Proxy configurations, including <code>VirtualDatabase</code>, <code>TrafficStrategy</code>, <code>DatabaseEndpoint</code> </li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="pisa-proxy-1">Pisa-Proxy<a class="hash-link" href="#pisa-proxy-1" title="标题的直接链接">​</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="setup-1">Setup<a class="hash-link" href="#setup-1" title="标题的直接链接">​</a></h5><ul><li>Retrieve configuration from Pisa-Controller</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="runtime">Runtime<a class="hash-link" href="#runtime" title="标题的直接链接">​</a></h5><ul><li>Support multiple proxy runtimes speaking MySQL protocol</li><li>Support connection pool and basic loadbalancing strategy</li><li>Support <code>Yacc</code> based SQL parser: SELECT, INSERT, UPDATE, DELETE, PREPARE, EXECUTE, BEGIN and SET.</li><li>Support <code>Regex</code> based SQL circuit break</li><li>Support <code>Regex</code> based SQL concurrency control</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="observability">Observability<a class="hash-link" href="#observability" title="标题的直接链接">​</a></h5><ul><li>Supoort basic observability<ul><li><code>sql_processed_total</code></li><li><code>sql_processed_duration</code></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-can-i-do-with-pisanix-">What can I do with Pisanix ?<a class="hash-link" href="#what-can-i-do-with-pisanix-" title="标题的直接链接">​</a></h2><p>Database Mesh designs with these building blocks and terminology below:</p><ul><li>Virtual Database: A database endpoint could be consumed by application</li><li>Traffic Strategy: Various strategy for database traffic, such as load balancing, sharding, rate limit and circuit breaker</li><li>Access Control: Providing fine-grained admission mechanism</li><li>Security Claim: Claim for security enhance mechanism, such as encryption</li><li>Audit Request: Request for user operation audit</li><li>Observability: Provide a config for observability of databases</li><li>Event Bus: Sink database change events to external systems</li><li>QoS Claim: Porviding several object guarantee for databases</li><li>Backup Job: Database backup jobs</li><li>Schema Pipeline: Using pipeline for versioned schema changing</li></ul><p>Pisanix introduced CustomResourceDefinition including <code>VirtualDatabase</code>, <code>Traffic Strategy</code> and <code>DatabaseEndpoint</code> as workloads. And this is a example of Weaveworks <a href="https://github.com/microservices-demo/microservices-demo" target="_blank" rel="noopener noreferrer">Socks-shop</a>. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="virtualdatabase">VirtualDatabase<a class="hash-link" href="#virtualdatabase" title="标题的直接链接">​</a></h3><p>VirtualDatabase is the root concept for every database governance actions in Pisanix. To developers, VirtualDatabase is represented as a database endpoint. For DBAs, VirtualDatabase is some kind of a logical database, so they need to provide some traffic strategy and bind it to a real backend database endpoint.</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> core.database</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> VirtualDatabase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> catalogue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">databaseMySQL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic"># Declare a MySQL database </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> socksdb                </span><span class="token comment" style="color:#999988;font-style:italic"># Declare the schema </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3306</span><span class="token plain">                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> catalogue_user       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default_password </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">trafficStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> catalogue   </span><span class="token comment" style="color:#999988;font-style:italic"># The target traffic strategy for the database </span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="trafficstrategy">TrafficStrategy<a class="hash-link" href="#trafficstrategy" title="标题的直接链接">​</a></h3><p>TrafficStrategy defines how the SQL requests will be routed to the real database endpoint, strategies like loadbalance, concurrency control, circuit break are supported now.</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> core.database</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TrafficStrategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> catalogue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">loadBalance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">simpleLoadBalance</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># A simple load balance strategy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> random               </span><span class="token comment" style="color:#999988;font-style:italic"># support random as selection algorithm </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic"># Declare the label selector to choose the backend database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> catalogue</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="databaseendpoint">DatabaseEndpoint<a class="hash-link" href="#databaseendpoint" title="标题的直接链接">​</a></h3><p>Database Endpoint refers to a real database endpoint, no matter it&#x27;s endpoint of AWS RDS, a MySQL instance, or ShardingSphere. Virtual Database consumes several DatabaseEndpoint with TrafficStrategy.</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> core.database</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DatabaseEndpoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> catalogue</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">MySQL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic"># Declare the database type MySQL </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> socksdb                 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cataloguedb.codtynlacssn.rds.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">northwest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1.amazonaws.com.cn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3306</span><span class="token plain">                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> root                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fake_password    </span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Now the working flow is like :</p><ol><li>Developers submit their need of database as VirtualDatabase</li><li>DBAs create and bind TrafficStrategy with DatabaseEndpoint</li><li>SREs add labels <code>pisanix.io/inject=enabled</code> to the application and update the configuration with credentials stored in VirtualDatabase.</li></ol><p>After the application is running, we can checkout the Socks-shop website as below:</p><p><img loading="lazy" src="/assets/images/socks-shop-02b12f5d82de9172b1d8aa199837eaaf.png" width="1280" height="755" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-about-the-next-steps-">How about the next steps ?<a class="hash-link" href="#how-about-the-next-steps-" title="标题的直接链接">​</a></h2><p>As we can see that Pisanix is very young, and have a definitely long way to run. In the next, we will first enhance the ability of traffic governance, like adding data sharding, data access behavior auditing, runtime resource Qos, etc. And we also continuously improving the performance and operability of Pisanix. More extensions mechanism like plugins will be in the future, help users to build their own solution very easily.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="community-call">Community Call<a class="hash-link" href="#community-call" title="标题的直接链接">​</a></h2><p>Building an open source community needs help from everywhere, no matter it&#x27;s code or documentation, issues or pull requests, community thanks all of your efforts.</p><p>At present, there are some ways to join the community:</p><table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left">Mailing List</td><td align="left"><a href="https://groups.google.com/g/database-mesh" target="_blank" rel="noopener noreferrer">https://groups.google.com/g/database-mesh</a></td></tr><tr><td align="left">Dev Meetings (Starting Feb 27th, 2022), Bi-weekly Wednesday 9:00AM PST</td><td align="left"><a href="https://meet.google.com/yhv-zrby-pyt" target="_blank" rel="noopener noreferrer">https://meet.google.com/yhv-zrby-pyt</a></td></tr><tr><td align="left">Dev Meetings APAC Friendly (Starting April 27th, 2022), Bi-weekly APAC Wednesday 9:00PM GMT+8</td><td align="left"><a href="https://meeting.tencent.com/dm/6UXDMNsHBVQO" target="_blank" rel="noopener noreferrer">https://meeting.tencent.com/dm/6UXDMNsHBVQO</a></td></tr><tr><td align="left">Wechat Broker</td><td align="left">pisanix</td></tr><tr><td align="left">Slack</td><td align="left"><a href="https://join.slack.com/t/databasemesh/shared_invite/zt-19rhvnxkz-USjZ~am~ghd_Q0q~8bAJXA" target="_blank" rel="noopener noreferrer">https://join.slack.com/t/databasemesh/shared_invite/zt-19rhvnxkz-USjZ~am~ghd_Q0q~8bAJXA</a></td></tr><tr><td align="left">Meetings Notes</td><td align="left"><a href="https://bit.ly/39Fqt3x" target="_blank" rel="noopener noreferrer">https://bit.ly/39Fqt3x</a></td></tr></tbody></table><p>Feel free to talk !</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>标签：</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/pisanix">pisanix</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/v-0-1-0">v0.1.0</a></li></ul></div><div class="col text--right col--3"><a aria-label="阅读 Hello! Pisanix! 的全文" href="/blog/greetings"><b>阅读更多</b></a></div></footer></article><nav class="pagination-nav" aria-label="博文列表分页导航"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">文档</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/quickstart">快速开始</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/maxwell9215" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://databasemesh.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">博客</a></li><li class="footer__item"><a href="https://github.com/database-mesh/pisanix" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SphereEx Authors. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.070bcc6e.js"></script>
<script src="/assets/js/main.fc8e8518.js"></script>
</body>
</html>